---
layout: default
title: Энкодер
parent: RU
nav_order: 1
---

# Содержание этого раздела справедливо как для руля, так и для джойстика.
{: .no_toc }

## Содержание
{: .no_toc .text-delta }

- TOC
{:toc}

---

## Какой тип энкодера нужен?

На данный момент програмное обеспечение поддерживает **только инкрементальные энкодеры**. 
Теоретически, любой инкрементальный энкодер будет работать. Не зависимо от того, оптический, магнитный или любого
другого типа. Главное - наличие **A/B** выходов.  

{: .important }
> **Z индекс** на данный момент **не используется**, поэтому его наличие/отсутствие не критично. 

## Что такое PPR/CPR?

**PPR** - Пульсов на оборот. Показывает сколько пульсов выдает канал энкодера (А или B) на один полный оборот.

**CPR** - Отсчетов на оборот. Показывает сколько позиций насчитает контролер скомбинировав сигнал по двум линиям. 

Отношение: **CPR = 4 x PPR**

В характеристиках энкодера может быть одна из этих цыфр. 
Далее будем пользоваться CPR. Увидев PPR просто умножаем на 4.  

## Kакой нужен CPR?

В общем случае будет работать с любым. Минимальным для использования **с мотором от ховерборда** 
я считаю будет энкодер **от 1000 CPR и выше** при прямой связи мотора с энкодером.

Если энкодер подключен **через редуктор**, то можно брать разрешение **меньше на степень
редукции** между мотором и энкодером. 

{: .highlight-title }
>Пример
> 
>Mежду мотором и энкодером используется редуктор 1:5. Минимальный энкодер можно посчитать как 1000/5 -> 200 CPR и выше.   

## Рекомендации к покупке

На рынке представлено много вариантов инкрементальных энкодеров. Часть из них проверена и гарантировано будет работать. 
Здесь не будет конкретных ссылок для покупки, ибо они постоянно устаревают и требуют обновления. Используйте поиск :)  

### CUI - AMT 10x серия
<img src="../../assets/images/AMT10x.png">

Наиболее дорогой, но на мой взгляд и максимально надежный вариант. К тому же имеет компактный форм фактор 
, возможно самый компактный из доступных опций. Эта серия представлена несколькими энкодерами:
- AMT-102 (8196 CPR)
- AMT-103 (8196 CPR)
- **AMT-10E2 (20480 CPR)**
- **AMT-10E3 (20480 CPR)**
 
Я отдаю предпочтение последним двум в своих устройствах. По цене они не отличаются от первых, при этом имеют гораздо 
выше CPR. 

{: .important }
> Модели энкодеров указаные выше существуют в двух вариантах. Нормальное исполнение с разьемом на лицевой панели, и в 
> версии V с разьемом снизу. Оба варианта идентичны отличаютя только положением разьема. Если видим маркировку 
> AMT-102-V - не пугаемся, это просто энкодер в высоком корпусе(на картинке тот что слева). Без буквы V в названии - 
> в низком(на картинке тот что справа) 

### OMRON-стайл
<img src="../../assets/images/omron.jpg">

В этой категории находится неисчислимое множество моделей оптических инкрементальных энкодеров которых обьединяет 
характерная бочкообразная форма исполнения корпуса. На рынке есть варианты с разным CPR и разной стоимостью. 
Как более дорогие оригиналы OMRON, так и различного рода китайские клоны.

{: .important }
> **Внимательно смотрим на требуемое питание энкодера**.
> 
>Не все энкодеры работают от 5 вольт. Есть энкодеры на 24 вольта и для них нужно 
> подсоединять провод питания энкодера к основной шине питания, чтобы обеспечить работоспособность.  

### Магнитные энкодеры
<img src="../../assets/images/magnetic.png">

Эту группу энкодеров обьединяет то, что они представляют собой плату с расположенным на ней микрочипом. Для корректной 
работы такого энкодера нужен еще магнит, расположенный на вращающейся части мотора. При этом плата должна быть с 
высокой точностью размещена фиксировано и соосно вращению магнита. Обычно эти энкодеры - самая дешевая опция. Но при 
этом нужно в каждом конкретном случае думать как энкодер и магнит расположить и закрепить. Единого стандартного решения 
не существует, так как форм плат существует множество. Из проверных рабочих вариантов можно рекомендовать:

- TLE5012B (16384 CPR)
- MT6701 (4096 CPR)

Потенциально в этом списке могут быть и другие магнитные инкрементальные энкодеры пока что не проверенные или не 
подтвержденные.  

## FAQ
Пишите мне если что-то упустил, будет добавляться. 
